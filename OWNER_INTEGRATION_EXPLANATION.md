# ๐ข Owner (ุงููุงูู) - ุงูุฏูุฑ ูุงูุชูุงูู

## โ ูุง ูู Owner ูููุงุฐุง ูุญุชุงุฌูุ

### ุงููุงูู (Owner) ูู ุงููุธุงู:

**Owner** = ูุงูู ุงูุนูุงุฑ ุงูุฐู:
1. **ูููู ุงูุนูุงุฑ** (Property)
2. **ูุคุฌูุฑู** ูููุณุชุฃุฌุฑูู (Clients)
3. **ุฃู ูุจูุนู** ูููุดุชุฑูู (Buyers)

---

## ๐ ุงูุชูุงูู ูุน ูุธุงู ุงููุจูุนุงุช

### ุงูุนูุงูุงุช ุงูุฃุณุงุณูุฉ:

```
Owner (ุงููุงูู)
  โ
Property (ุงูุนูุงุฑ)
  โ
  โโโ Contract (ุนูุฏ ุฅูุฌุงุฑ) โโ Client (ูุณุชุฃุฌุฑ)
  โโโ SalesContract (ุนูุฏ ุจูุน) โโ Buyer (ูุดุชุฑู)
```

---

## ๐ ุงููุฑู ุจูู ุงูุฃุทุฑุงู:

### 1. **Owner (ุงููุงูู)** ๐ข
```python
# ูู ูุธุงู ุงูุฅูุฌุงุฑุงุช:
Owner โ ูููู ุงูุนูุงุฑ โ ูุคุฌุฑู ูููุณุชุฃุฌุฑูู

# ูู ูุธุงู ุงููุจูุนุงุช:
Owner โ ูููู ุงูุนูุงุฑ โ ูุจูุนู ูููุดุชุฑูู (ูู ุงูุจุงุฆุน/Seller)
```

**ูุนูููุงุช Owner:**
- ุงูุงุณู
- ูุนูููุงุช ุงูุงุชุตุงู
- ุงูุฑูู ุงููุทูู
- ุงูุญุณุงุจ ุงูุจููู (ูุงุณุชูุงู ุงูุฃููุงู)
- ุงูุฑูู ุงูุถุฑูุจู

---

### 2. **Client (ุงููุณุชุฃุฌุฑ)** ๐ค
```python
# ูุณุชุฃุฌุฑ ุงูุนูุงุฑ
Client โ ูุณุชุฃุฌุฑ โ ุนูุฏ ุฅูุฌุงุฑ โ ุฏูุนุงุช ุดูุฑูุฉ
```

**ูุนูููุงุช Client:**
- ูุนูููุงุช ุดุฎุตูุฉ ุจุณูุทุฉ
- ุฏุฎู ุดูุฑู
- ุฌูุฉ ุงูุนูู
- ูุง ูุญุชุงุฌ ุชูููู ุงุฆุชูุงูู ูุนูุฏ

---

### 3. **Buyer (ุงููุดุชุฑู)** ๐ผ
```python
# ูุดุชุฑู ุงูุนูุงุฑ
Buyer โ ูุดุชุฑู โ ุนูุฏ ุจูุน โ ุฏูุนุงุช/ุชูุณูุท
```

**ูุนูููุงุช Buyer:**
- ูุนูููุงุช ูุงููุฉ ูุชูุฏูุฉ
- Credit Score (ุชูููู ุงุฆุชูุงูู)
- ุฏุฎู ุณููู
- ุชูููู ุจููู
- ูุฏุฑุฉ ุดุฑุงุฆูุฉ

---

## ๐ฐ ุงูุชูุงูู ุงููุงูู

### ูู ุนูุฏ ุงูุจูุน (SalesContract):

```python
class SalesContract(models.Model):
    property = ForeignKey(Property)      # ุงูุนูุงุฑ
    buyer = ForeignKey(Buyer)            # ุงููุดุชุฑู
    seller = ForeignKey(Owner)           # ุงูุจุงุฆุน (ุงููุงูู)
    sale_price = Decimal                 # ุณุนุฑ ุงูุจูุน
```

### ุนูุฏ ุงูุฏูุน:

```
ุนูุฏ ุชุณุฌูู ุฏูุนุฉ ูู ุงููุดุชุฑู:

1. Buyer ูุฏูุน ุงููุจูุบ
2. ูุชู ุชุณุฌูู ุงูุฏูุนุฉ (SalesPayment)
3. ุชููุดุฃ ูููุฏ ูุญุงุณุจูุฉ:
   - ูุฏูู: ุงูุจูู (ููุฏูุฉ)
   - ุฏุงุฆู: ุฅูุฑุงุฏุงุช ุงููุจูุนุงุช
4. Owner (ุงูุจุงุฆุน) ูุณุชูู ุงููุจูุบ (ููุญุณุจ ูู ุญุณุงุจู)
```

---

## ๐ ุณูุฑ ุงูุนูู ุงููุงูู

### ูุซุงู: ุจูุน ุนูุงุฑ

```
1. Owner ูููู ุงูุนูุงุฑ
   โโ Property.owner = Owner

2. Buyer ูุฑูุฏ ุดุฑุงุก ุงูุนูุงุฑ
   โโ Buyer ูุญุฌุฒ ุงูุนูุงุฑ (Reservation)

3. ุฅูุดุงุก ุนูุฏ ุงูุจูุน
   โโ SalesContract
      โโ property: ุงูุนูุงุฑ
      โโ buyer: ุงููุดุชุฑู
      โโ seller: Owner (ุงููุงูู/ุงูุจุงุฆุน)

4. Buyer ูุฏูุน ุงูุฃูุณุงุท
   โโ SalesPayment
      โโ ุงููุจูุบ ููุณุฌูู
      โโ ููุฏ ูุญุงุณุจู ุชููุงุฆู

5. ุนูุฏ ุงูุชูุงู ุงูุฏูุน
   โโ ุชุบููุฑ ููููุฉ ุงูุนูุงุฑ:
      Property.owner = Buyer (ุฃุตุจุญ ูุงูู ุฌุฏูุฏ!)
```

---

## ๐ ุงูุชูุงูู ูุน ุงูุฃูุธูุฉ ุงูุฃุฎุฑู

### 1. **ูุน ูุธุงู ุงูุนูุงุฑุงุช (Properties)**
```python
property = Property.objects.get(code='PROP-001')
owner = property.owner  # ูู ูููู ุงูุนูุงุฑุ
```

### 2. **ูุน ุงููุธุงู ุงููุงูู (Financial)**
```python
# ุนูุฏ ุจูุน ุนูุงุฑ:
- Owner ูุณุชูู ุงููุงู
- ููุณุฌูู ูู ุญุณุงุจู
- ููุฏ ูุญุงุณุจู:
  Debit: Bank
  Credit: Owner's Capital Account
```

### 3. **ูุน ูุธุงู ุงูุชูุงุฑูุฑ (Reports)**
```python
# ุชูุฑูุฑ ููุงูู ูุนูู:
owner = Owner.objects.get(pk=1)
- ุนูุงุฑุงุชู
- ุนููุฏ ุฅูุฌุงุฑุงุชู
- ุนููุฏ ุจูุนู
- ุฅูุฑุงุฏุงุชู (ุฅูุฌุงุฑุงุช + ูุจูุนุงุช)
```

---

## ๐ฏ ููุงุฐุง Owner ูููุตูุ

### โ ุงูููุงุฆุฏ:

1. **Separation of Concerns**
   - Owner ูู ูุนูููุงุชู ุงูุฎุงุตุฉ
   - Client ูู ูุนูููุงุชู
   - Buyer ูู ูุนูููุงุชู

2. **ุงููุฑููุฉ**
   - Owner ูุงุญุฏ ูููู ุนุฏุฉ ุนูุงุฑุงุช
   - Owner ูููู ุฃู ูููู buyer ูุนูุงุฑ ุขุฎุฑ
   - Client ูููู ุฃู ูุตุจุญ buyer

3. **ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช**
   - ูู ุนูุงุฑ ูููู Ownerุ
   - ูู ุฅูุฑุงุฏ ูู ุฅูุฌุงุฑุงุชุ
   - ูู ุฑุจุญ ูู ูุจูุนุงุชุ

4. **ุงูุฃูุงู ูุงูุตูุงุญูุงุช**
   - Owner ูู dashboard ุฎุงุต
   - ูุฑู ุนูุงุฑุงุชู ููุท
   - Client/Buyer ููู ุตูุงุญูุงุช ูุญุฏูุฏุฉ

---

## ๐ง ุงูุชูุงูู ุงููุนูู ูู ุงูููุฏ

### ูู SalesContract:

```python
# apps/sales/models/contract.py
class SalesContract(models.Model):
    # ...
    seller = models.ForeignKey(
        Owner,                              # โ ููุง!
        on_delete=models.PROTECT,
        related_name='sales',
        verbose_name='Seller'
    )
```

### ุนูุฏ ุฅูุดุงุก ุนูุฏ ุจูุน:

```python
# View
def contract_create(request):
    if request.method == 'POST':
        form = SalesContractForm(request.POST)
        if form.is_valid():
            contract = form.save()
            
            # ุงูุขู:
            print(f"ุงูุจุงุฆุน: {contract.seller.name}")       # Owner
            print(f"ุงููุดุชุฑู: {contract.buyer.name}")       # Buyer
            print(f"ุงูุนูุงุฑ: {contract.property.title}")   # Property
            print(f"ุงูุณุนุฑ: {contract.sale_price}")
```

### ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

```sql
-- ุฌุฏูู SalesContract
CREATE TABLE sales_salescontract (
    id INTEGER PRIMARY KEY,
    property_id INTEGER REFERENCES properties_property(id),
    buyer_id INTEGER REFERENCES sales_buyer(id),
    seller_id INTEGER REFERENCES owners_owner(id),  -- โ ุงููุงูู/ุงูุจุงุฆุน
    sale_price DECIMAL(15,2),
    ...
);
```

---

## ๐ก ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ุงุณุชุนูุงู ุจุณูุท

```python
# ูู ูู ุจุงุฆุน ูุฐุง ุงูุนูุฏุ
contract = SalesContract.objects.get(pk=1)
print(f"ุงูุจุงุฆุน: {contract.seller.name}")  # Owner

# ูู ุนูุฏ ุจุงุน ูุฐุง ุงููุงููุ
owner = Owner.objects.get(pk=1)
sales_count = owner.sales.count()
print(f"ุนุฏุฏ ุงููุจูุนุงุช: {sales_count}")
```

### ูุซุงู 2: ุชูุฑูุฑ ูุงูู

```python
from django.db.models import Sum

# ุฅุฌูุงูู ูุจูุนุงุช ุงููุงูู
owner = Owner.objects.get(pk=1)
total_sales = owner.sales.aggregate(
    total=Sum('sale_price')
)['total']

print(f"ุฅุฌูุงูู ุงููุจูุนุงุช: {total_sales}")
```

### ูุซุงู 3: ุชุญููู ุงูููููุฉ

```python
# ุจุนุฏ ุงูุชูุงู ุงูุฏูุน:
contract = SalesContract.objects.get(pk=1)

if contract.is_fully_paid():
    # ุชุญููู ุงูููููุฉ
    property = contract.property
    old_owner = property.owner
    
    # ุงููุดุชุฑู ุฃุตุจุญ ูุงูู!
    property.owner = contract.buyer  # ุฅุฐุง ุฃุถููุง ุนูุงูุฉ
    property.status = 'sold'
    property.save()
    
    print(f"ุชู ููู ููููุฉ {property.code} ูู {old_owner.name} ุฅูู {contract.buyer.name}")
```

---

## ๐ฏ ุงูุฎูุงุตุฉ

### Owner ุถุฑูุฑู ูุฃูู:

1. โ **ูููู ุงูุนูุงุฑ** - ุงูุนูุงูุฉ ุงูุฃุณุงุณูุฉ
2. โ **ุงูุจุงุฆุน ูู ุนููุฏ ุงูุจูุน** - `SalesContract.seller`
3. โ **ุงููุคุฌุฑ ูู ุนููุฏ ุงูุฅูุฌุงุฑ** - `Contract` โ `Property` โ `Owner`
4. โ **ูุณุชูู ุงูุฃููุงู** - ุงูุชูุงูู ุงููุงูู
5. โ **ูู ุชูุงุฑูุฑ ุฎุงุตุฉ** - ุฅูุฑุงุฏุงุชุ ูุจูุนุงุชุ ููููุงุช
6. โ **ููุทู ุฃุนูุงู ูุงุถุญ** - Separation of Concerns

---

## ๐ฎ ุงููุณุชูุจู: ุฑุจุท Buyer ุจู Client

### ูููู ุฅุถุงูุฉ:

```python
class Buyer(models.Model):
    # ุงูุญููู ุงูููุฌูุฏุฉ...
    
    # ุฑุจุท ุงุฎุชูุงุฑู ูุน Client
    related_client = models.ForeignKey(
        Client,
        null=True,
        blank=True,
        on_delete=models.SET_NULL,
        related_name='buyer_profile'
    )
```

**ุงููุงุฆุฏุฉ:**
- ููุณ ุงูุดุฎุต ูููู ุฃู ูููู ูุณุชุฃุฌุฑ (Client) ููุดุชุฑู (Buyer)
- ุชุงุฑูุฎ ูุงูู ููุนูุงูุฉ ูุน ุงูุนููู
- ูููู ูู module ูุณุชูู!

---

**ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ:** Owner ููุณ "ุฅุถุงูุฉ" - ูู **ุฌููุฑ ุงููุธุงู**! ๐

*ูู ูู ูููู ุงูุนูุงุฑุงุช ููุจูุนูุง ููุคุฌุฑูุง*
